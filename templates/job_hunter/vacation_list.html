{% extends 'base.html' %}
{% load crispy_forms_filters %}

{% block content %}
<div class="container mt-5">
    <h1 class="mb-4">Vacancies</h1>

    <form method="get" class="mb-4 d-flex flex-wrap align-items-end">
        <div class="form-group mr-3">
            {{ form.title|as_crispy_field }}
        </div>
        <div class="form-group mr-3">
            {{ form.experience|as_crispy_field }}
        </div>
        <div class="form-group mr-3">
            {{ form.location|as_crispy_field }}
        </div>
        <div class="form-group mr-3">
            {{ form.type_work|as_crispy_field }}
        </div>
        <div class="form-group mr-3">
            {{ form.type_work_time|as_crispy_field }}
        </div>
        <div class="form-group mr-3">
            {{ form.min_salary|as_crispy_field }}
        </div>
        <div class="form-group mr-3">
            {{ form.max_salary|as_crispy_field }}
        </div>
        <button type="submit" class="btn btn-primary">Search</button>
    </form>

    <div class="row">
        {% for vacation in vacation_list %}
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <div class="card-body">
                    <a href="{% url 'job_hunter:vacancies-detail' pk=vacation.id %}" class="text-decoration-none">
                        <h5 class="card-title">{{ vacation.title }}</h5>
                        <p class="card-text"><strong>Salary:</strong> {{ vacation.salary }}</p>
                        <p class="card-text"><strong>Location:</strong> {{ vacation.location }}</p>
                        <p class="card-text"><strong>Experience:</strong> {{ vacation.get_experience_display }}</p>
                        <p class="card-text"><strong>Type of Work:</strong> {{ vacation.get_type_work_display }}</p>
                        <p class="card-text"><strong>Type of Work Time:</strong> {{ vacation.get_type_work_time_display }}</p>
                        <p class="card-text"><strong>Categories:</strong> 
                            {% for category in vacation.categories.all %}
                                {{ category.name }}{% if not forloop.last %}, {% endif %}
                            {% endfor %}
                        </p>
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

